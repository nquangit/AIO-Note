up:: [[Offensive Security Labs]]

**Set Up a Penetration Testing Lab**

Setting up a testing lab is important for practicing cybersecurity skills safely. This guide will help you set up a virtual lab using VirtualBox, Kali Linux (for testing tools), and a vulnerable machine (Metasploitable 2) to learn in a controlled environment.

---

### **What You Need**

- **Basic understanding** of computer networking and virtualization (but don’t worry if you’re new—this guide is beginner-friendly).
- A **computer with at least 8GB of RAM** and enough disk space.
- **VirtualBox** installed on your computer. [Download VirtualBox here](https://www.virtualbox.org/wiki/Downloads).

---

### **Steps to Set Up Your Lab**

#### **Step 1: Install VirtualBox**
1. **Download VirtualBox:**
   - Go to [VirtualBox's download page](https://www.virtualbox.org/wiki/Downloads) and choose the version for your operating system (Windows, Mac, or Linux).
   
2. **Install VirtualBox:**
   - Open the downloaded file and follow the installation steps that pop up.

3. **Install the VirtualBox Extension Pack (Optional):**
   - Download the Extension Pack from the same download page. This gives extra features like USB support.
   - Double-click the Extension Pack file to install it.

---

#### **Step 2: Download and Set Up Kali Linux**
1. **Download Kali Linux:**
   - Visit [Kali Linux’s download page](https://www.kali.org/downloads/) and download the **VirtualBox image (OVA file)**.

2. **Import Kali Linux into VirtualBox:**
   - Open VirtualBox, go to `File > Import Appliance`.
   - Choose the OVA file you just downloaded and follow the prompts to import it.

3. **Start Kali Linux:**
   - Once the import is done, select the Kali Linux VM in VirtualBox and click "Start" to launch it.

---

### **Step 3: Download and Set Up Metasploitable 2**

1. **Download Metasploitable 2:**
   - Go to [Metasploitable 2’s download page](https://sourceforge.net/projects/metasploitable/files/Metasploitable2/) and download the ZIP file.
   - Once downloaded, unzip the file to access the Metasploitable 2 VMDK (virtual disk) file.
   - After unzipping, verify that the VMDK file is accessible and correctly extracted (no errors during unzipping).

2. **Create a New VM in VirtualBox for Metasploitable 2:**
   - Open VirtualBox and click on `New` to create a new virtual machine.
   - Name the machine "Metasploitable 2," set the type to `Linux`, and choose `Ubuntu (64-bit)` as the version.
   - Allocate at least 512MB of RAM to the virtual machine.
   - Select `Use an existing virtual hard disk file`, then browse to and select the Metasploitable 2 VMDK file that you extracted earlier.
   - Confirm the setup and create the VM.

3. **Verify System Compatibility:**
   - Ensure that **virtualization** is enabled on your host machine. This is usually done through your computer’s BIOS/UEFI settings.

4. **Start Metasploitable 2:**
   - Select the newly created Metasploitable 2 VM in VirtualBox and click "Start" to launch it.
   - If it starts without any errors, the VM setup is complete. If you encounter issues, verify the VM settings (e.g., Linux version, allocated memory) and ensure the VMDK file path is correct.

---

### **Step 4: Set Up Network Settings**

1. **Create a Host-Only Network in VirtualBox:**
   - In VirtualBox, go to `File > Host Network Manager`.
   - Create a new host-only network (you can name it `vboxnet0`).
   - Check the IP range for this network in the Host Network Manager to ensure it doesn’t conflict with other networks. The range is usually set to `192.168.56.x`.

2. **Configure Network Adapter for Kali Linux:**
   - Right-click on the Kali Linux VM, select `Settings`, go to the `Network` section, and set it to use the host-only adapter you just created (`vboxnet0`).
   - In the Adapter tab, select an adapter type that’s compatible with VirtualBox, like `Intel PRO/1000 MT Desktop (82540EM)`, for reliable connectivity.

3. **Configure Network Adapter for Metasploitable 2:**
   - Repeat the above steps for the Metasploitable 2 VM by setting its network adapter to the same host-only network (`vboxnet0`).
   - Verify that both VMs are on the same host-only adapter (`vboxnet0`) to ensure they are on the same internal network.

4. **Adjust Network Permissions:**
   - On your host machine, make sure that VirtualBox has permissions to use the network adapter, as some firewalls or antivirus programs may block it.

---

### **Step 5: Verify Network Connectivity**

1. **Start Both VMs (Kali Linux and Metasploitable 2):**
   - Launch both the Kali Linux and Metasploitable 2 VMs in VirtualBox.

2. **Check IP Addresses on Both VMs:**
   - Open a terminal on each VM and type:
     ```bash
     ifconfig
     ```
     or
     ```bash
     ip a
     ```
   - Confirm that both VMs have IP addresses in the same range (e.g., `192.168.56.101` for Kali and `192.168.56.102` for Metasploitable).

3. **Test Connectivity from Kali Linux to Metasploitable 2:**
   - In Kali Linux’s terminal, ping the Metasploitable 2 IP address:
     ```bash
     ping 192.168.56.102
     ```
   - You should see replies, which means the VMs are connected. If you don’t, try temporarily disabling your host machine’s firewall to see if it’s blocking the connection.

4. **Verify Connectivity in Both Directions:**
   - To ensure two-way communication, open a terminal on Metasploitable 2 and ping the Kali Linux IP address as well. This will confirm full connectivity between the VMs.

---

### **Step 6: Set Up Testing Tools on Kali Linux**

1. **Update Kali Linux:**
   - Open a terminal on Kali Linux and update the system packages to ensure you have the latest versions of all tools:
     ```bash
     sudo apt update && sudo apt upgrade -y
     ```

2. **Verify Metasploit and Nmap Installation:**
   - Kali Linux typically comes with Metasploit and Nmap pre-installed. Check if they’re installed by running:
     ```bash
     msfconsole --version
     nmap --version
     ```
   - If either tool is missing or outdated, install or upgrade them with:
     ```bash
     sudo apt install nmap metasploit-framework
     ```

3. **Troubleshoot Tool Installation if Needed:**
   - If there are issues with updating or installing, check your internet connection and try running:
     ```bash
     sudo apt clean
     sudo apt update
     ```
   - This can resolve issues if package files are corrupted.

---

### **Step 7: Practice Basic Penetration Testing**

1. **Run an Initial Nmap Scan:**
   - Start with a basic scan to confirm network visibility. Run this command in the Kali Linux terminal to scan Metasploitable 2’s IP address:
     ```bash
     nmap 192.168.56.102
     ```
   - Once confirmed, proceed with a more detailed scan:
     ```bash
     nmap -A 192.168.56.102
     ```
   - This will identify open ports and services on Metasploitable 2. Save these results to a file for easy review:
     ```bash
     nmap -A 192.168.56.102 -oN metasploitable_scan.txt
     ```

2. **Launch Metasploit and Search for Exploits:**
   - Start Metasploit on Kali Linux:
     ```bash
     msfconsole
     ```
   - Search for an exploit targeting a specific vulnerability in Metasploitable 2, such as the vsftpd 2.3.4 backdoor:
     ```bash
     search vsftpd
     ```
   - Load the selected exploit:
     ```bash
     use exploit/unix/ftp/vsftpd_234_backdoor
     ```

3. **Configure and Execute the Exploit:**
   - Set the IP address of Metasploitable 2 as the target:
     ```bash
     set RHOST 192.168.56.102
     ```
   - (Optional) If the exploit requires a specific payload, set it with:
     ```bash
     set PAYLOAD <desired_payload>
     ```
   - Run the exploit:
     ```bash
     exploit
     ```
   - If the exploit is successful, note the steps and output. If not, check Metasploit’s output for potential errors and confirm the IP and exploit parameters.

4. **Document Exploitation Steps:**
   - Log each step you take during the exploitation, including any adjustments made or errors encountered. Taking screenshots can help you review and share your process later.

---

#### **Step 8: Document Your Setup and Findings**
1. **Draw a Simple Network Diagram:**
   - Sketch or use a diagram tool to show how Kali Linux and Metasploitable 2 are connected in your host-only network.

2. **Record Your Scan Results:**
   - Note down the results from your Nmap scan, including which ports and services were found.

3. **Document Exploitation Steps:**
   - Write down the steps you followed for any successful exploit, including screenshots if possible.

---

### **Conclusion**

Congratulations! 🎉 You’ve set up a penetration testing lab using VirtualBox, Kali Linux, and Metasploitable 2. This lab gives you a safe space to practice cybersecurity skills. Try adding more vulnerable machines or exploring different tools and techniques to continue learning and improving!

---
### **Where to Find Assistance**

1. **Official Documentation**
   - [VirtualBox Documentation](https://www.virtualbox.org/manual/UserManual.html) – Detailed guide on VirtualBox setup and configuration.
   - [Kali Linux Documentation](https://www.kali.org/docs/) – Resources on using and configuring Kali Linux.

2. **Community Forums**
   - [VirtualBox Forum](https://forums.virtualbox.org/) – Discussions about VirtualBox setup, troubleshooting, and usage.
   - [Kali Linux Forum](https://forums.kali.org/) – Place to ask questions and find solutions specifically for Kali Linux.

3. **Online Tutorials**
   - [YouTube: Cyber Security Labs](https://www.youtube.com/results?search_query=cyber+security+labs) – Various YouTube channels offer step-by-step video tutorials for setting up a lab.
   - [Cybrary Labs](https://www.cybrary.it/catalog/courses/) – Beginner-friendly courses on penetration testing and ethical hacking.

4. **Discussion Boards**
   - [Reddit: r/netsecstudents](https://www.reddit.com/r/netsecstudents/) – Community for cybersecurity students to discuss their projects, ask questions, and share resources.
   - [Stack Overflow](https://stackoverflow.com/) – Helpful for technical troubleshooting related to VirtualBox, Linux commands, or networking.

---

### **Learning in Public Prompts**

1. “Today, I set up my first cybersecurity lab using VirtualBox and Kali Linux. I learned how to import and configure virtual machines. My biggest takeaway was…”
2. “I encountered a challenge when setting up network connectivity between Kali Linux and Metasploitable. Here’s how I solved it…”
3. “Just completed my first Nmap scan on Metasploitable 2! Here’s what I discovered about open ports and services…”
4. “I successfully exploited a vulnerability in my lab! It felt amazing to finally see everything come together. One thing I didn’t expect was…”
5. “Reflecting on what I’ve learned so far in setting up and testing a lab environment. One tip I’d share with other beginners is…”

---

### **Metrics to Track**

1. **Technical Metrics**
   - **Network Connectivity Success** – Track whether each virtual machine can ping each other.
   - **Successful Nmap Scans** – Record each scan and the number of open ports identified.
   - **Exploitation Success Rate** – Note how many vulnerabilities were successfully exploited during testing.

2. **Learning Metrics**
   - **Time Spent on Setup** – Measure how long each step of the setup took to identify where improvements could be made.
   - **New Tools Installed** – Track tools added to Kali Linux, like Nmap or Metasploit, and document their use cases.
   - **Cost of Network/Tools** – Estimate costs for any paid resources, such as additional software or network upgrades.
   - **People Helped/Assisted** – Track interactions or assistance provided to peers who might also be setting up labs or working through similar issues.

---

### **STAR Statement Examples for Resumes**

- **Set up a penetration testing lab using VirtualBox, Kali Linux, and Metasploitable 2** by creating a host-only network and configuring virtual machines, which enabled hands-on practice with network scanning and exploitation tools.
  
- **Performed network scans and vulnerability assessments** using Nmap and Metasploit on a lab environment, identifying multiple exploitable services and strengthening skills in vulnerability discovery and penetration testing.

- **Troubleshot and resolved network connectivity issues** between virtual machines in a host-only network setup, enhancing my problem-solving abilities and understanding of network configurations.

- **Documented detailed steps and findings from penetration tests**, creating a comprehensive record of methods, tools, and successful exploits to reference for future learning and project sharing.

---

### **Tools & Skills to Add to Tools & Technologies Sheet**

1. **Tools**
   - VirtualBox
   - Kali Linux
   - Metasploitable 2
   - Nmap
   - Metasploit Framework

2. **Skills**
   - Virtual Machine Setup and Configuration
   - Network Configuration and Troubleshooting
   - Network Scanning and Analysis
   - Exploitation and Vulnerability Testing
   - Documentation and Reporting